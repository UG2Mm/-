<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>功能整合</title>
    <style>
        :root {
            --primary: #4776E6;
            --danger: #E53935;
            --warning: #FF9800;
            --success: #4CAF50;
            --text: #333;
            --bg: #f8f9fa;
            --white: #fff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        header {
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--white);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .time {
            font-size: 0.9rem;
            color: #666;
        }

        .auth-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-warning {
            background: var(--warning);
            color: var(--white);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .btn-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            justify-content: center;
        }

        .btn-main {
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .contact-btn {
            position: fixed;
            left: 1rem;
            bottom: 1rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .modal-content {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 4px;
            width: 90%;
            max-width: 400px;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            margin: 0.5rem 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .btn-list {
            max-height: 300px;
            overflow-y: auto;
            margin: 1rem 0;
        }

        .btn-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>
    <header>
        <div id="beijingTime" class="time"></div>
        <div class="auth-buttons">
            <button id="addBtn" class="btn btn-warning" style="display: none;">添加</button>
            <button id="deleteBtn" class="btn btn-danger" style="display: none;">删除</button>
            <button id="authBtn" class="btn btn-success">登录</button>
        </div>
    </header>

    <div class="container">
        <div class="btn-container" id="buttonContainer">
            <button class="btn-main" data-url="https://www.baidu.com">百度</button>
            <button class="btn-main" data-url="https://www.google.com">谷歌</button>
        </div>
    </div>

    <button id="contactBtn" class="contact-btn">联系我</button>

    <!-- 图片模态框 -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <img id="contactImage" src="https://free.picui.cn/free/2025/08/27/68ade70ba3776.png" style="max-width: 100%;">
        </div>
    </div>

    <!-- 登录模态框 -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>用户登录</h2>
            <input type="password" id="password" class="form-input" placeholder="请输入密码">
            <div class="modal-actions">
                <button id="submitBtn" class="btn btn-primary">登 录</button>
            </div>
        </div>
    </div>

    <!-- 添加按钮模态框 -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <h2>添加新按钮</h2>
            <input type="text" id="btnName" class="form-input" placeholder="按钮名称">
            <input type="text" id="btnUrl" class="form-input" placeholder="跳转链接">
            <div class="modal-actions">
                <button id="addSubmitBtn" class="btn btn-primary">添 加</button>
            </div>
        </div>
    </div>

    <!-- 删除按钮模态框 -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <h2>选择要删除的按钮</h2>
            <div class="btn-list" id="btnList"></div>
            <div class="modal-actions">
                <button id="closeDeleteModal" class="btn">关 闭</button>
            </div>
        </div>
    </div>

    <!-- 确认删除模态框 -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h2>确认删除</h2>
            <p id="confirmMessage">确定要删除这个按钮吗？</p>
            <div class="modal-actions">
                <button id="confirmDelete" class="btn btn-danger">确认删除</button>
                <button id="cancelDelete" class="btn">取 消</button>
            </div>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const authBtn = document.getElementById('authBtn');
        const addBtn = document.getElementById('addBtn');
        const deleteBtn = document.getElementById('deleteBtn');
        const buttonContainer = document.getElementById('buttonContainer');
        const contactBtn = document.getElementById('contactBtn');
        const imageModal = document.getElementById('imageModal');
        const loginModal = document.getElementById('loginModal');
        const addModal = document.getElementById('addModal');
        const deleteModal = document.getElementById('deleteModal');
        const confirmModal = document.getElementById('confirmModal');
        const submitBtn = document.getElementById('submitBtn');
        const addSubmitBtn = document.getElementById('addSubmitBtn');
        const closeDeleteModal = document.getElementById('closeDeleteModal');
        const confirmDelete = document.getElementById('confirmDelete');
        const cancelDelete = document.getElementById('cancelDelete');
        const passwordInput = document.getElementById('password');
        const btnNameInput = document.getElementById('btnName');
        const btnUrlInput = document.getElementById('btnUrl');
        const contactImage = document.getElementById('contactImage');
        const beijingTime = document.getElementById('beijingTime');
        const btnList = document.getElementById('btnList');
        const confirmMessage = document.getElementById('confirmMessage');

        // 状态变量
        let isLoggedIn = false;
        let selectedButton = null;

        // 更新北京时间
        function updateBeijingTime() {
            const now = new Date();
            const weekdays = ['日', '一', '二', '三', '四', '五', '六'];
            beijingTime.textContent = `${now.getFullYear()}年${now.getMonth()+1}月${now.getDate()}日 星期${weekdays[now.getDay()]} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
        }

        // 更新UI状态
        function updateUI() {
            if (isLoggedIn) {
                authBtn.textContent = '退出';
                authBtn.className = 'btn btn-danger';
                addBtn.style.display = 'flex';
                deleteBtn.style.display = 'flex';
            } else {
                authBtn.textContent = '登录';
                authBtn.className = 'btn btn-success';
                addBtn.style.display = 'none';
                deleteBtn.style.display = 'none';
            }
        }

        // 登录/退出功能
        authBtn.addEventListener('click', function() {
            if (isLoggedIn) {
                isLoggedIn = false;
                updateUI();
            } else {
                loginModal.style.display = 'flex';
                passwordInput.value = '';
                passwordInput.focus();
            }
        });

        // 登录提交
        submitBtn.addEventListener('click', function() {
            if (passwordInput.value === '74107410') {
                isLoggedIn = true;
                updateUI();
                loginModal.style.display = 'none';
            } else if (passwordInput.value !== '') {
                alert('密码错误');
            }
        });

        // 添加按钮点击
        addBtn.addEventListener('click', function() {
            addModal.style.display = 'flex';
            btnNameInput.value = '';
            btnUrlInput.value = '';
            btnNameInput.focus();
        });

        // 添加提交
        addSubmitBtn.addEventListener('click', function() {
            const name = btnNameInput.value.trim();
            let url = btnUrlInput.value.trim();
            
            if (name && url) {
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'http://' + url;
                }
                
                const newBtn = document.createElement('button');
                newBtn.className = 'btn-main';
                newBtn.textContent = name;
                newBtn.setAttribute('data-url', url);
                newBtn.addEventListener('click', function() {
                    window.location.href = url;
                });
                
                buttonContainer.appendChild(newBtn);
                addModal.style.display = 'none';
            } else {
                alert('请填写名称和链接');
            }
        });

        // 删除按钮点击
        deleteBtn.addEventListener('click', function() {
            // 清空按钮列表
            btnList.innerHTML = '';
            
            // 获取所有按钮并添加到列表
            const buttons = buttonContainer.querySelectorAll('.btn-main');
            buttons.forEach(btn => {
                const btnItem = document.createElement('div');
                btnItem.className = 'btn-item';
                
                const btnName = document.createElement('span');
                btnName.textContent = btn.textContent;
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn btn-danger';
                deleteBtn.textContent = '删除';
                deleteBtn.addEventListener('click', function() {
                    selectedButton = btn;
                    confirmMessage.textContent = `确定要删除"${btn.textContent}"按钮吗？`;
                    deleteModal.style.display = 'none';
                    confirmModal.style.display = 'flex';
                });
                
                btnItem.appendChild(btnName);
                btnItem.appendChild(deleteBtn);
                btnList.appendChild(btnItem);
            });
            
            // 显示删除模态框
            deleteModal.style.display = 'flex';
        });

        // 确认删除
        confirmDelete.addEventListener('click', function() {
            if (selectedButton) {
                selectedButton.remove();
                selectedButton = null;
            }
            confirmModal.style.display = 'none';
        });

        // 取消删除
        cancelDelete.addEventListener('click', function() {
            selectedButton = null;
            confirmModal.style.display = 'none';
            deleteModal.style.display = 'flex';
        });

        // 关闭删除模态框
        closeDeleteModal.addEventListener('click', function() {
            deleteModal.style.display = 'none';
        });

        // 联系按钮点击
        contactBtn.addEventListener('click', function() {
            if (isLoggedIn) {
                const newImageUrl = prompt('请输入新的图片URL:', contactImage.src);
                if (newImageUrl) {
                    contactImage.src = newImageUrl;
                }
            } else {
                imageModal.style.display = 'flex';
            }
        });

        // 点击模态框外部关闭
        [loginModal, addModal, deleteModal, confirmModal, imageModal].forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                    selectedButton = null;
                }
            });
        });

        // 初始更新时间并设置定时器
        updateBeijingTime();
        setInterval(updateBeijingTime, 1000);
    </script>
</body>
</html>
